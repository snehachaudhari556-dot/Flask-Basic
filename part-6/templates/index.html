{% extends 'base.html' %}

{% block content %}

<div class="card welcome-card">
    <h2>ðŸ‘‹ Welcome to Your To-Do App</h2>
    <p>This app helps you organize your daily work efficiently.</p>
</div>

<div class="card">
    <h3>ðŸ“‹ Your Tasks</h3>

    <!-- Search Form -->
    <form method="GET" action="/search" class="search-form" style="margin-bottom: 20px;">
        <input type="text" name="search" 
               placeholder="Search tasks..." 
               value="{{ search_query or '' }}" 
               class="plain-input" 
               style="width: 300px; padding: 8px; font-size: 16px;">
        <button type="submit" class="btn">Search</button>
    </form>

    <!-- Task List -->
    {% if tasks %}
        {% for task in tasks %}
            <div class="task-card">
                <div>
                    <strong>{{ task.title }}</strong>
                    <p>Priority: {{ task.priority }}</p>
                    <p>Due Date: {{ task.due_date }}</p>

                    {% if task.status == 'Completed' %}
                        <span class="badge completed">Completed</span>
                    {% elif task.status == 'In Progress' %}
                        <span class="badge progress">In Progress</span>
                    {% else %}
                        <span class="badge pending">Pending</span>
                    {% endif %}
                </div>

                <div class="task-actions">
                    <a href="/edit/{{ task.id }}" class="btn">Edit</a>
                    <a href="{{ url_for('task_detail', id=task.id) }}" class="btn">View</a>
                    <a class="delete"
                       href="{{ url_for('delete_task', id=task.id) }}"
                       onclick="return confirm('Delete this task?')">
                       Delete
                    </a>
                </div>
            </div>
        {% endfor %}
    {% else %}
        <p>No tasks found.</p>
    {% endif %}
</div>

{% endblock %}
